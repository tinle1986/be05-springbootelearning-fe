<!doctype html>
<html lang="en">

<head>
  <title>Search Result</title>
  <!--  Customized CSS-->
  <link rel="stylesheet" href="css/elearning.css">

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="./lib/bootstrap/bootstrap.min.css">


  <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
  <link rel="stylesheet" href="./css/home.css">
</head>

<body>
<header class="border-bottom">
  <nav class="navbar navbar-expand-sm navbar-light bg-light">
    <a class="navbar-brand" href="index.html">Elearning</a>
    <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse"
            data-target="#collapsibleNavId" aria-controls="collapsibleNavId" aria-expanded="false"
            aria-label="Toggle navigation"></button>
    <div class="collapse navbar-collapse row" id="collapsibleNavId">
      <div class="col-md-6">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0 d-flex align-items-center justify-content-between">
          <li class="nav-item mr-3">
            <div class="dropdown">
              <a class="btn btn-outline-light dropdown-toggle" data-toggle="dropdown">
                <i class="fa fa-th"></i>
                <span class="ml-2">Categories</span>
              </a>
              <div class="dropdown-menu" id="dropdownMenuId">
              </div>
            </div>
          </li>
          <li class="nav-item w-100">
            <form class="input-group nav-search">
              <input type="text" class="form-control" placeholder="Search courses" id="searchInput">
              <div class="input-group-append">
                <button class="btn bg-white text-danger" id="searchBtn"><i class="fa fa-search"></i></button>
              </div>
            </form>
          </li>
        </ul>
      </div>
      <div class="col-md-1 nav-cart">
        <!--        <i class="fa fa-shopping-basket"></i>-->

        <div class="dropdown">
          <div class="dropdown-toggle font-weight-bold text-dark btn notification" data-toggle="dropdown" id="">
            <i class="fa fa-shopping-basket"></i>
            <span class="badge" id="cartCount">0</span>
          </div>
          <div class="dropdown-menu">
            <div id="selectedCourses">
              <ol id="selectedCoursesSub">
              </ol>
            </div>
            <div class="dropdown-divider"></div>
            <a id="purchaseCoursesBtn" class="dropdown-item" href="#">Purchase Courses</a>
            <div class="dropdown-divider"></div>
            <a id="clearCoursesBtn" class="dropdown-item" href="#" onclick="clearCart()">Clear Courses</a>
          </div>
        </div>
      </div>
      <div class="col-md-5 text-right" id="rightMenu">
        <button class="btn btn-outline-secondary" data-toggle="modal"
                data-target="#loginModal">Login
        </button>
        <button class="btn btn-danger ml-2" data-toggle="modal" data-target="#signUpModal">Sign
          up
        </button>
      </div>
    </div>
  </nav>
</header>

<!--BREADCRUMB LINE-->
<nav aria-label="breadcrumb">
  <div class="container-fluid">
    <ol class="breadcrumb bg-white mb-0 py-2">
      <li class="breadcrumb-item"><a href="#"><i class="fa fa-home mr-1"></i> <span class="text-capitalize">Search</span></a>
      </li>
    </ol>
  </div>
</nav>

<section>
  <h2 class="ml-3 mb-5 text-dark font-weight-bold" id="searchDescription"></h2>
</section>

<!-- BEGIN COURSE LIST -->
<section class="popular">
  <div class="container-fluid">
<!--    <h3 class="title mt-0">Popular course</h3>-->
    <div class="row" id="searchResult">
    </div>
  </div>
</section>

<!-- SIGN IN MODAL -->
<div class="modal" id="loginModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Đăng nhập</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="lgEmail">Email</label>
            <input type="email" class="form-control" id="lgEmail">
          </div>
          <div class="form-group">
            <label for="lgPassword">Password</label>
            <input type="password" class="form-control" id="lgPassword">
          </div>
        </form>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="logIn()" data-dismiss="modal">Đăng nhập</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Thoát</button>
      </div>

    </div>
  </div>
</div>

<!-- SIGN UP MODAL -->
<div class="modal" id="signUpModal">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Đăng ký</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="rgName">Name</label>
            <input type="text" class="form-control" id="rgName">
          </div>
          <div class="form-group">
            <label for="rgEmail">Email</label>
            <input type="email" class="form-control" id="rgEmail">
          </div>
          <div class="form-group">
            <label for="rgPhone">Phone</label>
            <input type="text" class="form-control" id="rgPhone">
          </div>
          <div class="form-group">
            <label for="rgPassword">Password</label>
            <input type="password" class="form-control" id="rgPassword">
          </div>
          <div class="form-group">
            <label for="rgConfirm">Confirm</label>
            <input type="password" class="form-control" id="rgConfirm">
          </div>
        </form>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" onclick="register()" data-dismiss="modal">Đăng ký</button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">Thoát</button>
      </div>

    </div>
  </div>
</div>

<footer class="py-4 mt-4 text-center border-top" id="page-footer">
</footer>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="./lib/jquery/jquery.slim.min.js"></script>
<script src="./lib/popper.js/popper.min.js"></script>
<script src="./lib/bootstrap/bootstrap.min.js"></script>
<!--  Font Awesome-->
<!--  <link rel="stylesheet" href="./lib/font-awesome/css/font-awesome.min.css">-->
<script src="https://kit.fontawesome.com/3a06200ec6.js" crossorigin="anonymous"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="js/elearning.js"></script>

<script>
	drawMainMenuItem();
	let courseBought = null;
	let searchString = localStorage.getItem("keywordtf");

	if (searchString) {
		document.getElementById("searchDescription").innerHTML = "Results for searching " + "'" + searchString + "'"
		showSearchResult(searchString);
  } else {
		document.getElementById("searchDescription").innerHTML = "Results for searching " + "'" + "'"
		showSearchResult("");
  }

	let currentToken = localStorage.getItem("ut");
	if (currentToken) {
		getUserProfile(currentToken);
		getCourseBoughtList(currentToken);
		showProfileMenuWithoutCourseId(currentToken);
		courseBought = JSON.parse(localStorage.getItem("courseBought"));
		if (courseBought == null) {
			window.location.reload();
    }
	}


	let courseInCart = JSON.parse(localStorage.getItem("courseInCart"));
	if (courseInCart == null) {
		courseInCart = [];
		disableCartPurchase();
  } else {
		showCartList(courseInCart)
	}
	document.getElementById("cartCount").innerHTML = courseInCart.length;
	document.getElementById("purchaseCoursesBtn").addEventListener("click", () => {
		let courseIdList = JSON.parse(localStorage.getItem("courseInCart"));
		buyAll(currentToken);
		if (currentToken) {
			courseIdList.forEach(courseId => {
				disableButtonInList("addCartBtn_" + courseId);
			})
    }
  })

  // click button search
  document.getElementById("searchBtn").addEventListener("click", (event) => {
  	event.preventDefault();
  	let searchText = document.getElementById("searchInput").value;
  	document.getElementById("searchDescription").innerHTML = "Results for searching " + "'" + searchText + "'"
  	showSearchResult(searchText);
  })

	showPageFooter();
</script>
</body>

</html>